{% extends 'base.html' %}

{% block content %}
<div class="printjobdetail grid-x grid-margin-x">
    <div class="cell small-12 medium-3">
        <img src="{% url 'printjob_render' slug=object.slug %}">
    </div>
    <div class="cell auto">
        {% if object.running_attempt.user == request.user %}
        you are printing this!
        <form action="{% url 'printjob_give_back' slug=object.slug %}" method="POST">
            {% csrf_token %}
            <button class="button success large" type="submit">give back</a>
        </form>
        <form action="{% url 'printjob_done' slug=object.slug %}" method="POST">
            {% csrf_token %}
            <button class="button success large" type="submit">done</a>
        </form>
        {% elif object.running_attempt.user %}
        someone is already printing this
        {{ object.running_attempt }}
        {% elif object.finished %}
        already finished :)
        {% else %}
        {% if can_take %}
        No attempt running.<br>
        <form action="{% url 'printjob_take' slug=object.slug %}" method="POST">
            {% csrf_token %}
            <button class="button success large" type="submit">Take</a>
        </form>
        {% else %}
        No attempt running, but you already have {{ max_jobs }}.<br>
        {% endif %}
        {% endif %}
    </div>
</div>
{% endblock %}
